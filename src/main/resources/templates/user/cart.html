<!DOCTYPE html>
<html lang="en">
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Document</title>

<link rel="stylesheet" href="/css/cart.css">

<!-- 상단, 하단 버튼 jQuery -->
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script>
	$(function() {
		$(".top_btn").click(function() {
			$('html, body').animate({
				scrollTop : 0
			}, 400);
			return false;
		});

		$(".bottom_btn").click(function() {
			$('html, body').animate({
				scrollTop : document.body.scrollHeight
			}, 400);
			return false;
		});
	});
</script>
</head>

<body>
	<!-- 헤더 -->
	<header style="font-size: 50px; font-weight: bold;"> Y4J 헤더 </header>

	<div class="cart_section">
		<div class="cart_box">
			<!-- 장바구니 헤더 -->
			<div class="cart_header">
				<em>Cart</em>
			</div>


			<div class="cart_innerbox">

				<!-- 장바구니 양식 제목 -->
				<div class="cart_content_title">
					<div style="display: flex; justify-content: space-around;">
						<input type="checkbox" class="check_btn" id="check_all" onclick="checkAll()" checked style="margin-left: -5px;">
						<span class="title_code" style="margin-left: -55px;">상품번호</span> <span class="title_img" style="margin-left: -10px;">이미지</span> <span class="title_info" style="margin-left: 0px;">상품정보</span> <span class="title_quantity" style="margin-left: 80px;">수량</span> <span class="title_price">상품구매금액</span> <span class="title_fee">배송비</span> <span class="title_select" style="margin-left: -15px;">선택</span>
					</div>
				</div>

				<!-- 장바구니에 넣은 상품들 정보 -->
				<th:block th:each="cvo:${map.cvo}">

					<div class="cart_content_box" style="margin: 0 auto;">

						<div class="cart_content_innerbox " style="display: flex; justify-content: space-around; height: inherit;">
							<!-- 개별 상품 체크박스 -->
							<div class="product_check left" style="margin-left: 10px;">
								<input type="checkbox" name="check" class="check" onclick="checkOne()" checked style="height: 18.4px;" th:value="${cvo.cart_no}" data-cart_no="${cvo.cart_no}">
							</div>

							<!-- 상품 번호 -->
							<div class="product_code left">
								<input type="text" th:value="${cvo.cart_prod_no}" name="cart_prod_no" readonly>
							</div>

							<!-- 상품 이미지 -->
							<div class="product_img left">
								<img th:src="${cvo.prod_img_path}" alt="박명수짤" style="width: 100px; height: 100px;">
							</div>

							<!-- 상품 정보 -->
							<div class="product_info left">
								<div>
									<a href="/product.html">
										<em name="">[ [[${cvo.prod_artist}]] ] </em> <br /> <span name="prod_name">[[${cvo.prod_name}]]</span>
									</a>
								</div>
							</div>

							<!-- 상품 수량 -->
							<div class="product_quantity aaa left">
								<button type="button" class="quantity_subtract" onclick="quantity_minus()" style="border: none; background-color: inherit; cursor: pointer; font-size: 27px;">-</button>

								<input type="text" class="prod_quantity" name="cart_prod_cnt" th:value="${cvo.cart_prod_cnt}" size="3">

								<button type="button" class="quantity_add" onclick="quantity_add()" style="border: none; background-color: inherit; cursor: pointer; font-size: 20px;">+</button>
							</div>

							<!-- 상품 수량 별 가격 -->
							<div class="product_price left">
								<div class="product_price_inner">
									<em style="color: crimson; font-weight: 600;">[[${cvo.prod_discount_rate}]]%</em>
									<input type="text" class="cart_prod_price" name="cart_prod_price" th:value="${cvo.prod_price}" readonly>
								</div>
							</div>

							<!-- 배송비 -->
							<div class="delivery_fee left">
								<p style="font-size: 14.5px;">무료</p>
							</div>

							<!-- 주문 및 삭제 버튼 -->
							<div class="decision_btn select_btn left">
								<div>
									<form action="orderOne" method="post" class="orderOne">
									<button type="submit" class="applicable_order_btn" style="cursor: pointer;" onclick="orderOne()">주문하기</button>
									</form>
								
									<form action="deleteCartOne" method="post" class="deleteCartOne">
										<button type="submit" class="delete_btn" onclick="deleteCartOne()" style="cursor: pointer;" th:value="${cvo.cart_no}">
											<img src="https://jafp.s3.ap-northeast-2.amazonaws.com/y4j/delete.png" alt="휴지통아이콘" style="width: 19px; height: 19px; vertical-align: middle;"> 삭제
										</button>
									</form>

								</div>
							</div>
						</div>
					</div>
				</th:block>
	
	<!-- //////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
	
			<!-- 	<!-- 앨범 부분  -->
				<th:block th:each="avo:${map.avo}">

					<div class="cart_content_box" style="margin: 0 auto;">

						<div class="cart_content_innerbox " style="display: flex; justify-content: space-around; height: inherit;">
							개별 상품 체크박스
							<div class="product_check left" style="margin-left: 10px;">
								<input type="checkbox" name="check" class="check" onclick="checkOne()" checked style="height: 18.4px;" th:value="${avo.cart_no}" data-cart_no="${avo.cart_no}">
							</div>

							상품 번호
							<div class="product_code left">
								<input type="text" th:value="${avo.cart_album_no}" name="cart_album_no" readonly>
							</div>

							상품 이미지
							<div class="product_img left">
								<img th:src="${avo.album_img_path}" alt="박명수짤" style="width: 100px; height: 100px;">
							</div>

							상품 정보
							<div class="product_info left">
								<div>
									<a href="/product.html">
										<em name="">[ [[${avo.album_artist}]] ] </em> <br /> <span name="album_title">[[${avo.album_title}]]</span>
									</a>
								</div>
							</div>

							상품 수량
							<div class="product_quantity aaa left">
								<button type="button" class="quantity_subtract" onclick="quantity_minus()" style="border: none; background-color: inherit; cursor: pointer; font-size: 27px;">-</button>

								<input type="text" class="prod_quantity" name="cart_album_cnt" th:value="${avo.cart_album_cnt}" size="3">

								<button type="button" class="quantity_add" onclick="quantity_add()" style="border: none; background-color: inherit; cursor: pointer; font-size: 20px;">+</button>
							</div>

							상품 수량 별 가격
							<div class="product_price left">
								<div class="product_price_inner">
									<em style="color: crimson; font-weight: 600;">[[${avo.album_discount_rate}]]%</em>
									<input type="text" class="cart_album_price" name="cart_album_price" th:value="${avo.album_price}" readonly>
								</div>
							</div>

							배송비
							<div class="delivery_fee left">
								<p style="font-size: 14.5px;">무료</p>
							</div>

							주문 및 삭제 버튼
							<div class="decision_btn select_btn left">
								<div>
									<form action="orderOne" method="post" class="orderOne">
									<button type="submit" class="applicable_order_btn" style="cursor: pointer;" onclick="orderOne()">주문하기</button>
									</form>
								
									<form action="deleteCartOne" method="post" class="deleteCartOne">
										<button type="submit" class="delete_btn" onclick="deleteCartOne()" style="cursor: pointer;" th:value="${avo.cart_no}">
											<img src="https://jafp.s3.ap-northeast-2.amazonaws.com/y4j/delete.png" alt="휴지통아이콘" style="width: 19px; height: 19px; vertical-align: middle;"> 삭제
										</button>
									</form>

								</div>
							</div>
						</div>
					</div>
				</th:block>
				 -->
				
				

				<!-- 선택 상품 삭제 버튼 -->
				<form action="checkedDelCart" class="checkedDelCart" method="post">
					<div class="checked_delete">
						<div>
							<button type="submit" class="checked_del_btn " onclick="checkedDelCart()">선택상품 삭제</button>
						</div>
					</div>
				</form>



				<!-- 총 결제 금액 -->
				<div class="price_box">
					<div class="price_innerbox">
						<span>총 상품 금액</span> <span>배송비</span> <span>결제 예정 금액</span>
					</div>
					<div class="total_price_box">
						<div class="total_price_innerbox">
							<span class="total_price" >1000원</span> <span>+</span> <span>0원</span> <span>=</span> <span style="color: rgb(221, 64, 64);" class="total_price"  >100원</span>
						</div>
					</div>
				</div>

				<!-- 최종 상품 주문 -->
				<div class="finally_order">
					<div class="order_btnbox">
						<button type="button" onclick="location.href='mypage'" style="cursor: pointer;">쇼핑 계속하기</button>
						<button type="submit" style="cursor: pointer;" onclick="checkedOrder()">선택상품 주문하기</button>
					</div>
				</div>


				<!--  cart_innerbox -->
			</div>

		</div>

		<!-- 상단, 하단으로 가는 버튼 -->
		<div class="arrow_btn">
			<a href="#" class="top_btn">
				<img src="https://jafp.s3.ap-northeast-2.amazonaws.com/y4j/go_to_top.png" alt="상단버튼">
			</a>
			<br />
			<a href="#" class="bottom_btn">
				<img src="https://jafp.s3.ap-northeast-2.amazonaws.com/y4j/go_to_bottom.png" alt="하단버튼">
			</a>
		</div>

	</div>


	<footer> Footer 부분 </footer>

	<script th:inline="javascript">
		var cvo = JSON.parse('[[${cvo}]]');
		//console.log(cvo)
		var sum = 0;
		cvo.forEach(item => {
			sum += parseInt(item.cart_total_price);
		})
		
		//console.log($(".total_price"))
		$(".total_price").html(sum+"원");
   </script>

</body>

<script src="/js/cart.js"></script>


</html>